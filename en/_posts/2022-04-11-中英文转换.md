---
layout: post
title: '中英文转换'
date: 2022-04-10 12:19:19 +0800
author: 李乐升
cover: 'http://on2171g4d.bkt.clouddn.com/jekyll-banner.png'
tags: Jekyll
language: en
subtitle: 'This article mainly explains how to achieve internationalization in Jekyll, and realize the mutual jump between Chinese and English articles'
---

When Jekyll builds a personal website, you may encounter the need to switch the corresponding language pages for different users. In this article, we mainly focus on switching between Chinese and English. During the exploration of the corresponding implementation technology, it was found that most of the functions of directly translating the page are difficult to make the user have a better user experience. Therefore, this paper adopts two pages in Chinese and English to switch each other. The disadvantage of this implementation is that if you want to convert Chinese and English pages, the website owner must provide markdown files in both languages when publishing article information.

## Prerequisite knowledge

In the H2O theme used in this article, its md files are stored in the _post folder. Jekyll will automatically scan all the md files in the _post folder in the entire working directory, and according to the web page path configured in _config.yml Generate the corresponding html page.

### Webpage path configuration

In Jekyll, if you want to configure the path corresponding to the html file generated in the web page, you need to configure the `permalink` configuration item in the _config.yml file under the path.

> If the permalink parameter is not configured in _config.yml, it means that it uses the default parameter.

There are the following default parameters in permalink:

- year 
- month 
- i_month （month without zero）
- day 
- i_day （day without zero）
- title 
- categories 

> If you want to switch between Chinese and English pages, you need to configure the categories file directory, store the Chinese md files in the _post folder under ch, and store the English md files in the _post folder under en. The specific configuration is: /:categories/:title.html

At the same time, there are three preset parameters in permalink, as follows:

- date：/:categories/:year/:month/:day/:title.html （default）
- pretty：/:categories/:year/:month/:day/:title/
- none：/:categories/:title.html

I believe everyone can easily understand date and none, but pretty is completely different from the other two. It ends with: title/ instead of title.html, so the displayed web page address will not have a .html suffix, so that The user's experience may be better (this method is not adopted in this article), you can try it.

## Implementation

In this section, we will give an overview of how to switch between Chinese and English in the article.

### Profile configuration

First configure the web page path to the configuration file _config.yml in Jekyll.

```yml
permalink: /:categories/:title.html
```

This is very important. It must be configured to jump through links in the page, especially its /:categories prefix. Only after configuration can the Chinese page in the web page be under ch and English under en, for example：https://karsalee.github.io/ch/时区转换.html

### File Directory

Then create the ch and en folders respectively in the root directory, and create a _post subfolder in both, and store the corresponding Chinese and English md files in the corresponding folder.

### Jump link implementation

Because under the H2O theme, the html page generated by each article has a common template named post.html, and you can modify the corresponding template for generating html files according to the theme you use.
In post.html, we added a link next to the tag corresponding to the article to jump to the corresponding Chinese/English page. But there is another problem, how to make English displayed in Chinese page and Chinese displayed in English page? Requirements as shown in the figure below:

![](https://guli-20211028.oss-cn-beijing.aliyuncs.com/2022-04-11-12-56-45-image.png)

![](https://guli-20211028.oss-cn-beijing.aliyuncs.com/2022-04-11-12-56-14-image.png)

Here we need to first add a language tag to the top of the md file, for example:

```markdown
---
layout: post
title: 'Chinese-English conversion'
date: 2022-04-11 12:19:19
author: 李乐升
cover: 'http://on2171g4d.bkt.clouddn.com/jekyll-banner.png'
tags: Jekyll
language: en
subtitle: 'This article mainly explains how to achieve internationalization in Jekyll, and realize the mutual jump between Chinese and English articles'
---
```

The optional content of the language tag is ch and en, and then in post.html, the content of the language of the current file is judged by if, if it is ch, the page displays English, and if it is en, the page implements Chinese. The content written in post.html is:

```html
{% if page.language == 'ch' %}
    <a href="../en/{{page.title}}.html" class="post-tag">English</a>
{% endif %}
{% if page.language == 'en' %}
    <a href="../ch/{{page.title}}.html" class="post-tag">中文</a>
{% endif %}
```

## 总结

The above operation realizes switching between different languages as needed. This method is a traditional method, which can bring a better experience to the user, but will bring great difficulties to the developer. If you can find the code that can automatically translate the page, it will be more convenient, and the author will attach a link to the new article after finding it.
